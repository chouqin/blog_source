---
layout: post
title: "mysql basic"
description: ""
category: mysql 
tags: [mysql]
---
{% include JB/setup %}
这几天好好地研究了一下mysql,认真地看了《High Performance MySQL》的几章，
才发现，要能够精通mysql真的是一个长期的工程，有效得管理mysql,
使它能够具有很强的稳定性同时具有很快的相应速度，这其中设计的东西远远不是
数据库的课上写几条sql语句那么简单。而在这篇博客中，我也仅就mysql的
一些基本优化知识谈谈我的看法，待以后更加深入研究之后，再继续分享。

##MySQL的表的设计

###Normalized Schema Or Denormalized Schema?
在一般的数据库教材中，讲到设计库表结构的设计，都是将数据库设计范式作为
设计的准则，因为这样设计的数据库表重复很少，这样就会减少存储空间，
同时因为重复的内容少，维护起来也很方便，
因为如果很多的重复的话一个信息的更改可能会需要在多处进行更改才能保证数据的一致性。
然而，数据库范式并不是万能的，这样设计出来的数据库会造成查找时间的加长，因为要
查找一些数据往往需要将多个表join起来，而join是比较费时间的数据库操作，
同时，一些有关系的列被分散到各个表中，不好组合在一起建成一个索引，这样也会减低查找的
速度。所以在设计数据库的表的结构时，要结合应用的实际情况，平衡考虑。

###Cache Table & Summary Table
使用“空间换取时间”的理念，在数据统计的过程中，为了方便同时，
我们会建立一些缓存表，这些表的目的是把一个表中的多行信息或者多个表的信息
综合起来，比如有一个表保存了今天的用户访问记录，
就可以建成一个day_count表统计每天有多少用户访问，这样如果需要查询某一天有多少
用户访问的时候直接去这个表中去查了。缓存表引入的一个问题是缓存表的维护，一般是通过
一些周期性跑的脚本去更新这些缓存表，FlexView这个工具能够自动的帮我们维护这些缓存表，
有兴趣的可以尝试一下。

###数据类型的选择
尽量选择小的，简单的数据类型，能用tinyint就不要用int,能有enum就不要用varchar。
同时尽量不要用NULL，因为NULL会引入许多的问题，首先是它不容易被索引，
同时保存它占用了更多的空间。
